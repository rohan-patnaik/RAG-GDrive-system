# Netlify configuration file

[build]
  # Command to build your site (e.g., install dependencies)
  command = "pip install -r requirements.txt"

  # Directory (relative to root of your repo) that contains the deploy-ready
  # HTML files and assets generated by the build command.
  publish = "frontend/static"

  # Directory (relative to root of your repo) that contains Netlify Functions
  # serverless functions.
  functions = "netlify/functions"

# Redirects and Rewrites
# Maps API paths to Netlify functions.

[[redirects]]
  from = "/api/health"
  to = "/.netlify/functions/health"
  status = 200 # OK
  force = true # Ensure this rule is applied even if a file exists at /api/health

[[redirects]]
  from = "/api/query"
  to = "/.netlify/functions/query"
  status = 200 # OK (Netlify's proxy handles the HTTP method pass-through)
  force = true # Ensure this rule is applied even if a file exists at /api/query

[[redirects]]
  from = "/api/ingest"
  to = "/.netlify/functions/ingest"
  status = 200 # OK
  force = true

# You can add more settings like headers, environment variables context, etc.
# For example, to set a default Python version for functions:
# [functions]
#   runtime = "python3.9" # Or your desired Python version supported by Netlify
